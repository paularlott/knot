# Server configuration
[server]

# Address and port to listen on
listen = "0.0.0.0:3000"

# Address and port to listen on for agents
listen_agent = "0.0.0.0:3010"

# Address and port for the agents to connect to
agent_endpoint = "srv+knot-server-agent.service.consul"

# The URL to the Knot server (used for the web interface)
url = "https://knot.internal"

# The wildcard domain to expose the web interface of spaces on
#wildcard_domain = "*.knot.internal"

# Encryption key for protected variables (knot genkey)
#encrypt = "VF9hmdXZyzNF3rcP6M0P"

# Optional server zone, defaults to the hostname
#zone = "myservers"

[server.terminal]
webgl = true

# MySQL storage
[server.mysql]
enabled = false
# MySQL host if prefixed with srv+ then SRV+ lookup will be performed
host = "localhost"
port = 3306
user = "root"
password = ""
database = "knot"

# BadgerDB storage
[server.badgerdb]
enabled = false
path = "./badgerdb/"

# Redis storage
[server.redis]
enabled = false
# Redis host if prefixed with srv+ then SRV+ lookup will be performed
hosts = ["localhost:6379"]
password = ""
db = 0

[server.nomad]
addr = "http://127.0.0.1:4646"
token = ""

# MCP (Model Context Protocol) server
[server.mcp]
enabled = false

# Remote MCP servers (optional)
# Uncomment and configure to connect to external MCP servers
# [[server.mcp.remote_servers]]
#   namespace = "ai"
#   url = "https://ai.example.com/mcp"
#   token = "your-bearer-token"
#   hidden = false  # Set to true to hide tools from ListTools (callable but not listed)
#
# [[server.mcp.remote_servers]]
#   namespace = "data"
#   url = "https://data.example.com/mcp"
#   token = "your-data-service-bearer-token"
#   hidden = false
#
# [[server.mcp.remote_servers]]
#   namespace = "internal"
#   url = "https://internal.example.com/mcp"
#   token = "your-internal-service-bearer-token"
#   hidden = true  # Hidden tools - callable from scripts but not listed

# [server.cluster]
# advertise_addr = "https://knot.example.com/"
# key = "VF9hmdXZyzNF3rcP6M0P" # knot genkey
# peers = [
#   "wss://knot.example.com",
#   "wss://knot1.example.com",
#   "wss://knot2.example.com"
# ]

# Optional nameservers to use for SRV lookups
# [resolver]
#   consul = ["192.168.0.4:8600"]
#   nameservers = ["192.168.0.2:53"]

[log]
level = "info"
