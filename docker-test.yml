container_name: ${{ .user.username }}-${{ .space.name }}
hostname: "${{ .space.name }}"
image: hub.anaconda.ovh/library/knot-ubuntu:24.04
auth:
  username: "${{.var.registry_user}}"
  password: "${{.var.registry_pass}}"
ports:
  - 3000:3000/tcp
  - 3010:3010/tcp
volumes:
  - /Users/paul/t:/myhome
  - volume1:/volume1
  - volume2:/volume2

#command: [
#  "./knot",
#  "server"
#]

#privileged: true
#network: host # or none

environment:
  - "KNOT_SERVER=${{.server.url}}"
  - "KNOT_AGENT_ENDPOINT=${{.server.agent_endpoint}}"
  - "KNOT_SPACEID=${{.space.id}}"

volumes:
  volume1:
  volume2:
